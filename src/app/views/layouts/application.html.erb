<!-- MAIN: área que ocupa o espaço restante -->
<main class="flex flex-1">

  <!-- SIDEBAR (só aparece se for admin) -->
  <% if defined?(current_usuario) && current_usuario&.admin? %>
    <aside class="w-60 bg-gray-800 text-white flex flex-col">
      <div class="px-4 py-4 font-bold text-lg border-b border-gray-700">
        Administração
      </div>

      <nav class="flex-1 px-2 py-4 space-y-2">
        <%= link_to "Gerenciamento",
                    "/admin",
                    class: "block px-4 py-2 rounded hover:bg-gray-700" %>
      </nav>
    </aside>
  <% end %>

  <!-- CONTEÚDO PRINCIPAL -->
  <section class="flex-1 flex items-center justify-center">
    <div class="w-full max-w-4xl mx-auto px-6 py-10">

      <!-- Flash Messages -->
      <% flash.each do |type, msg| %>
        <% classes = case type.to_s %>
          <% when 'notice' then 'bg-green-100 border-green-400 text-green-700' %>
          <% when 'alert'  then 'bg-red-100 border-red-400 text-red-700' %>
          <% else               'bg-blue-100 border-blue-400 text-blue-700' %>
        <% end %>

        <div class="mb-4 px-4 py-3 rounded relative border <%= classes %>" role="alert">
          <span class="block sm:inline"><%= msg %></span>
        </div>
      <% end %>

      <!-- Conteúdo dinâmico das views -->
      <%= yield %>
    </div>
  </section>
</main>
